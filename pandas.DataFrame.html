<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>pandas.DataFrame</title>
    <style type="text/css">
        body {
            font-family: verdana, arial, sans-serif;
        }
        b {
            font-size: 125%;
            color: blue;
        }
    </style>
</head>
<body>
<dev><p>
    В этом видео мы продолжим работать с библиотекой <b>Pandas</b>, а именно разберемся, как устроен <b>DataFrame</b> и
    как с ним работать. Давайте импортируем нужные нам библиотеки. Как работать с DataFrame мы рассмотрим на примере
    DataSet по поездкам велобайка в Нью-Йорке. Давайте посмотрим, как устроен сам DataFrame? Нам зачастую не надо
    распечатывать весь DataFrame, когда мы хотим узнать его структуру, какие там содержатся столбцы. Допустим нам
    интересно посмотреть только на первые 5 строк и в Pandas есть такой метод под названием "head", который по умолчанию
    возвращает первые 5 строк нашего DataFrame, также можно указать другое число строк, допустим 3, и тогда уже вернётся
    указанное число строк. Что же из себя представляет данный DataFrame? Мы видим, что поездки имеют следующую
    информацию - это станция, с которой началась поездка, её идентификатор, адрес и координаты, время, начало поездки, а
    также конечная станция с такими же параметрами. Также есть: идентификатор велобайка, тип пользователя, его год
    рождения, бывает указан\не указан, и также указывается пол. Если нам нужно посмотреть не первые 5 строк DataFrame, а
    допустим последние, то можно воспользоваться методом <b>"tail"</b>, который аналогично возвращает последние 5 строк
    по умолчанию, но указывая необходимое число строк, например, 2, мы можем видеть только эти 2 строки. Помимо этого
    DataFrame обладает следующими свойствами: можно посмотреть его размеры, сначала указывается число строк, и затем
    указывается число столбцов, далее можно отдельно распечатать именно название столбцов, и также можно посмотреть,
    какие типы данных у нас есть в нашем DataFrame. В данном случае возвращается <b>"series"</b>, где каждому столбцу
    соответствует его тип данных. Мы видим, что наш DataFrame представляет из себя, как числовое значение, так и
    категориальное значение. Также можно вывезти не весь DataFrame, а некоторые столбцы. Для этого необходимо указать
    лист нужных нам столбцов и их передать, и мы тогда можем распечатать не весь DataFrame, а только выбранные столбцы.
    В данном случае мы видим стартовое время и название станции. Давайте теперь разберем, как обращаться к элементам
    DataFrame. В Pandas реализованы такие методы, как <b>loc/iloc</b>. <b>Iloc</b> позволяет по индексу обращаться к
    строкам и столбцам. Допустим, если нам необходимо вытащить значения хранящиеся в самой последней строке, мы можем в
    ilоc указать индекс минус 1 и по умолчанию вернется последняя строка. Давайте теперь разберем, как обращаться к
    элементам в DataFrame? В Pandas реализованы такие методы, как loc и iloc С помощью iloc можно вытаскивать значение
    по индексу, например, если мы хотим посмотреть значение в самой последней строке, мы указываем индекс минус 1, и у
    нас возвращается эта последняя строка, а также с помощью метода iloc можно посмотреть какое значение будет лежать в
    DataFrame на пересечении столбца и строки. Мы указываем сначала индекс по строке, а затем по столбцу. А также есть
    другой метод, который называется loc. Он также работает, мы указываем значение по строке и указываем уже индекс по
    столбцу, но он отличается от iloc тем, что мы можем указывать значение слайсы по лейблу. Допустим, здесь мы указали
    в качестве слайсы тип поездки. Эти 2 метода имеют некоторые отличия. Например, если мы хотим отфильтровать с помощью
    метода iloc указывая вот эти границы, то у нас не включается крайние значения, то есть мы видим, что у нас
    возвращаются строки от 0 до 5, не включая ту строку с индексом 6, и аналогично по столбцам. Метод же loc работает
    наоборот, он включает крайние значения, и мы здесь видим, что возвращаемый DataFrame на одну строку и один столбец
    больше, чем в предыдущем случае. Зачастую при работе с DataFrame мы сталкиваемся с тем, что нам нужно выбрать
    какие-то некоторые строки удовлетворяющие некоторым условиям. Например, мы хотим выбрать только те поездки, вина
    которых меньше, чем 400 секунд. Как это можно сделать? Нам нужно создать маску, которая будет являться нашим
    условием и передать ее в качестве индекса нашему DataFrame. И мы видим, что в данном случае размер возвращаемого
    DataFrame уже меньше. Также можно создавать несколько условий на фильтрацию. Например, мы можем отобрать только те
    поездки, длина которых меньше, чем 1000 секунд и выбрать определенный тип пользователя, и эти два условия можно
    связать логическим оператором. Помимо фильтрации в Pandas реализованы некоторые методы, которые позволяют посмотреть
    статистику по всему DataFrameу. Например, с помощью метода <b>describe</b> можно посмотреть среднее, максимально,
    минимальное значение сразу по всем столбцам, так как наш DataFrame хранит не только числовые, но и категориальные
    признаки, то с помощью метода "describe" по ним тоже можно посмотреть статистику, но нужно указать, какой тип данных
    мы хотим увидеть. И в данном случае у нас возвращается статистика по категориальным признакам, увидим, что здесь
    присутствует такая статистика, как общее число встречаемости и количество уникальных значений. Также, когда мы
    работаем, например, с категориальными признаками мы хотим знать соотношение некоторых значений. И это можно сделать
    с помощью метода <b>"value_counts"</b>. Мы рассматриваем в данном случае столбец - тип пользователя, и мы можем
    видеть соотношение двух типов подписок. Также можно возвращать ненормализованное значение, достаточно для этого
    убрать аргумент. И также можно посмотреть количество уникальных значений в некоторых series. Это можно сделать с
    помощью метода <b>"unigue"</b>, у нас здесь возвращается "numpy array". Также можно найти корреляцию между всеми
    столбцами DataSet, используя метод <b>"corr"</b>. И мы видим, что у нас возвращается матрица признаков. Также можно
    посмотреть корреляцию между всеми столбцами DataSet, если они численные. Это можно сделать с помощью метода "corr".
    Мы видим, что у нас возвращается некоторая матрица, где у нас стоят значения корреляции между парой признаков.
    Помимо этого, бывает нужно сделать какой-то sample из исходного DataFrame (если у нас, допустим, очень большой
    DataFrame, мы хотим сохранить какую-то маленькую часть) это можно сделать с помощью метода <b>"sample"</b>, который
    выберет какую-то долю из исходного DataFrame, и мы указываем какой дуэлят DataFrame мы хотим увидеть. После
    указанных преобразований мы можем сохранить DataFrame и использовать метод <b>"to_csv"</b>. Для этого нам необходимо
    указать путь к файлу, а также можно указать какие-то другие параметры. Чтобы посмотреть другие параметры данного
    метода можно воспользоваться сочетанием клавиш <b>Shift+Tab</b>, и у нас вернется некоторая документация, и мы
    видим, что здесь указано большое количество других параметров при сохранении, например, тип разделителя, хотим ли мы
    сохранять с названиями столбцов или нет, можем указывать тип кодировки. Это можно все детально посмотреть. Давайте
    подведем итог. В этом видео мы поработали с DataFrame, посмотрели, как в него загружать данные, какие манипуляции с
    ним можно сделать, и как сохранить итоговый результат. В следующем видео вы продолжите работать в библиотеках
    Pandas.
</p></dev>
</body>
</html>